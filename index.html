<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>SG↔IST Time Converter</title>
  <meta name="theme-color" content="#06070d" />
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="mobile-web-app-capable" content="yes">
  <link rel="manifest" href="manifest.webmanifest">
  <link rel="icon" href="icons/icon-192.png">
  <style>
    :root{
      --bg:#05060a; --ink:#e7ecff; --muted:#9aa3b2;
      --glass1:rgba(255,255,255,.06); --glass2:rgba(255,255,255,.12);
      --cy:#6ee7ff; --vi:#a78bfa; --sky:#7dd3fc; --ring:#60a5fa;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0; font-family: Inter, ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial;
      color:var(--ink);
      background: radial-gradient(1200px 1200px at 10% 10%, rgba(124,58,237,.15), transparent 60%),
                  radial-gradient(1200px 1200px at 90% 20%, rgba(14,165,233,.18), transparent 60%),
                  linear-gradient(180deg, #06070d 0%, #0a0d16 100%);
      overflow-x:hidden;
    }
    .wrap{max-width:960px;margin:28px auto;padding:18px}
    .header{display:flex;align-items:center;gap:14px;margin-bottom:16px}
    .logo{width:42px;height:42px;border-radius:12px;background:linear-gradient(135deg,var(--cy),var(--vi));
          box-shadow:0 0 28px rgba(109,226,255,.45), inset 0 0 22px rgba(167,139,250,.35);
          display:grid;place-items:center;color:#00131a;font-weight:800}
    h1{font-size:24px;margin:0}
    .sub{margin:6px 0 0 0;color:var(--muted)}

    .panel{position:relative;background:linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.03));
           border:1px solid rgba(255,255,255,.1); border-radius:22px; padding:22px;
           box-shadow:0 12px 40px rgba(0,0,0,.5), 0 0 0 1px rgba(255,255,255,.04) inset, 0 0 80px rgba(110,231,255,.05) inset;
           backdrop-filter: blur(8px);}
    .glow-line{position:absolute; inset:-1px; border-radius:22px; pointer-events:none;
               background: conic-gradient(from 0deg, transparent 0 20%, rgba(110,231,255,.2), transparent 45% 100%);
               mask: linear-gradient(black, transparent 30%); animation: spin 9s linear infinite; filter: blur(6px); opacity:.6}
    @keyframes spin{to{transform:rotate(1turn)}}
    .grid{display:grid;gap:16px}
    @media(min-width:860px){.grid{grid-template-columns:1.2fr 1fr}}
    label{display:block;margin:8px 0 8px 4px;color:var(--muted);font-size:13px}
    .row{display:flex;gap:12px;align-items:center}
    .btn{cursor:pointer;border:1px solid rgba(255,255,255,.16);border-radius:12px;padding:12px 14px;font-weight:700;
         background:linear-gradient(135deg, rgba(96,165,250,.25), rgba(125,211,252,.25));
         box-shadow:0 6px 24px rgba(99,102,241,.25), inset 0 0 40px rgba(255,255,255,.06); transition: transform .06s ease}
    .btn:active{transform:translateY(1px)}
    .btn.secondary{background:rgba(255,255,255,.05)}
    .btn.ghost{background:transparent;border-style:dashed}
    input,select{width:100%;padding:14px 14px;border-radius:12px;border:1px solid rgba(255,255,255,.12);
                 background:#0b1220;color:var(--ink);font-size:15px;outline:none}
    input:focus,select:focus{border-color:var(--sky); box-shadow:0 0 0 6px rgba(125,211,252,.12)}
    .seg{display:flex;background:rgba(255,255,255,.04);border:1px solid rgba(255,255,255,.12);border-radius:12px;overflow:hidden}
    .seg button{flex:1;padding:12px 14px;background:transparent;color:var(--muted);border:0;cursor:pointer;font-weight:600;letter-spacing:.2px}
    .seg button.active{color:var(--ink);background:linear-gradient(90deg, rgba(110,231,255,.18), rgba(167,139,250,.18));box-shadow: inset 0 0 24px rgba(125,211,252,.25)}
    .out{margin-top:14px; padding:18px;border-radius:16px;background:linear-gradient(180deg, rgba(13,19,34,.9), rgba(9,13,24,.9));border:1px solid rgba(255,255,255,.12);font-variant-numeric:tabular-nums; font-size:16px; line-height:1.5}
    .mono{font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, Monaco, monospace}
    .badges{display:flex;flex-wrap:wrap;gap:10px;margin:8px 0 0}
    .badge{padding:6px 10px;border-radius:999px;border:1px solid rgba(255,255,255,.14);color:var(--muted);font-size:12px}
    .hint{color:var(--muted);font-size:12px;margin-top:10px}
  </style>
</head>
<body>
  <div class="wrap">
    <div class="header">
      <div class="logo">⏱️</div>
      <div>
        <h1>g2g time converter — sg ↔ ist (pwa)</h1>
        <p class="sub">install to your home screen • works offline • neon pro vibes.</p>
      </div>
    </div>

    <div class="panel">
      <div class="glow-line"></div>
      <div class="grid">
        <div>
          <label>conversion</label>
          <div class="seg" id="seg">
            <button data-mode="sg_to_ist" class="active">SG → IST</button>
            <button data-mode="ist_to_sg">IST → SG</button>
          </div>
          <label style="margin-top:14px">date & time</label>
          <input id="dt" type="datetime-local" class="mono" />
          <div class="row" style="margin-top:12px">
            <button id="nowBtn" class="btn">use current time</button>
            <button id="clearBtn" class="btn secondary">clear</button>
          </div>
          <div class="badges">
            <span class="badge">sg (gmt+8) is <b>+2h30m</b> ahead of ist</span>
            <span class="badge mono">rule: ist = sg − 2:30</span>
            <span class="badge mono">sg = ist + 2:30</span>
          </div>
        </div>
        <div>
          <label>result</label>
          <div class="out mono" id="result">—</div>
          <div class="row" style="margin-top:10px">
            <button id="copyBtn" class="btn ghost">copy</button>
            <button id="plus14" class="btn">+14 days (hold)</button>
          </div>
          <p class="hint">payout cut‑off: <b>14:00 sg</b> (~<b>11:30 ist</b>)</p>
        </div>
      </div>
    </div>
  </div>

  <script>
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
        navigator.serviceWorker.register('./sw.js');
      });
    }
    const SG = 8; const IST = 5.5;
    const pad = n => String(n).padStart(2,'0');
    function parseLocalDT(v){ if(!v) return null; const [d,t]=v.split('T'); const [y,m,day]=d.split('-').map(Number); const [hh,mm]=t.split(':').map(Number); return {y,m,day,hh,mm}; }
    function toUTC(s, off){ const ms = Date.UTC(s.y, s.m-1, s.day, s.hh, s.mm); return ms - off*3600*1000; }
    function fromUTC(ms, off){ const d = new Date(ms + off*3600*1000); return { y:d.getUTCFullYear(), m:d.getUTCMonth()+1, day:d.getUTCDate(), hh:d.getUTCHours(), mm:d.getUTCMinutes() }; }
    function fmt(s,l){ return `${l}: ${pad(s.y)}-${pad(s.m)}-${pad(s.day)} ${pad(s.hh)}:${pad(s.mm)}`; }
    const seg=document.getElementById('seg'), dtEl=document.getElementById('dt'), resEl=document.getElementById('result');
    const nowBtn=document.getElementById('nowBtn'), clearBtn=document.getElementById('clearBtn'), copyBtn=document.getElementById('copyBtn'), plus14=document.getElementById('plus14');
    let mode='sg_to_ist';
    function update(){ const p=parseLocalDT(dtEl.value); if(!p){resEl.textContent='—'; return;} if(mode==='sg_to_ist'){ const utc=toUTC(p,SG); const ist=fromUTC(utc,IST); resEl.textContent=`${fmt(ist,'IST (GMT+5:30)')}  •  (${fmt(fromUTC(utc,SG),'SG input')})`; } else { const utc=toUTC(p,IST); const sg=fromUTC(utc,SG); resEl.textContent=`${fmt(sg,'SG (GMT+8)')}  •  (${fmt(fromUTC(utc,IST),'IST input')})`; } }
    seg.addEventListener('click',e=>{ const b=e.target.closest('button'); if(!b) return; mode=b.dataset.mode; [...seg.children].forEach(x=>x.classList.toggle('active', x===b)); update(); });
    dtEl.addEventListener('input', update);
    nowBtn.addEventListener('click',()=>{ const utc=Date.now(); const zone=(mode==='sg_to_ist')?SG:IST; const local=fromUTC(utc,zone); dtEl.value=`${local.y}-${pad(local.m)}-${pad(local.day)}T${pad(local.hh)}:${pad(local.mm)}`; update(); });
    clearBtn.addEventListener('click',()=>{ dtEl.value=''; update(); });
    copyBtn.addEventListener('click',async()=>{ const t=resEl.textContent.trim(); if(!t||t==='—')return; try{ await navigator.clipboard.writeText(t); copyBtn.textContent='copied!'; setTimeout(()=>copyBtn.textContent='copy',1200);}catch(e){} });
    plus14.addEventListener('click',()=>{ const p=parseLocalDT(dtEl.value); if(!p) return; let utc=(mode==='sg_to_ist')?toUTC(p,SG):toUTC(p,IST); const plus=utc + 14*24*3600*1000; if(mode==='sg_to_ist'){ const ist=fromUTC(plus,IST); const sg=fromUTC(plus,SG); resEl.textContent=`${fmt(ist,'IST (GMT+5:30) +14d')}  •  (${fmt(sg,'SG (GMT+8) +14d')})`; } else { const sg=fromUTC(plus,SG); const ist=fromUTC(plus,IST); resEl.textContent=`${fmt(sg,'SG (GMT+8) +14d')}  •  (${fmt(ist,'IST (GMT+5:30) +14d')})`; } });
    // init default
    (function(){ const utc=Date.now(); const local=fromUTC(utc,SG); dtEl.value=`${local.y}-${pad(local.m)}-${pad(local.day)}T${pad(local.hh)}:${pad(local.mm)}`; update(); })();
  </script>
</body>
</html>
